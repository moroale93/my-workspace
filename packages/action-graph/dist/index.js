!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s="/7QA")}({"/7QA":function(t,r,e){"use strict";e.r(r),e.d(r,"Action",(function(){return At})),e.d(r,"ActionStore",(function(){return U}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function o(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function i(t){return"function"==typeof t}var u=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;u=t},get useDeprecatedSynchronousErrorHandling(){return u}};function s(t){setTimeout((function(){throw t}),0)}var a={closed:!0,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},f=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function l(t){return null!==t&&"object"==typeof t}var p=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),h=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r;if(!this.closed){var e=this._parentOrParents,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof t)e.remove(this);else if(null!==e)for(var u=0;u<e.length;++u){e[u].remove(this)}if(i(n))try{n.call(this)}catch(t){r=t instanceof p?b(t.errors):[t]}if(f(o)){u=-1;for(var c=o.length;++u<c;){var s=o[u];if(l(s))try{s.unsubscribe()}catch(t){r=r||[],t instanceof p?r=r.concat(b(t.errors)):r.push(t)}}}if(r)throw new p(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var o=e._parentOrParents;if(null===o)e._parentOrParents=this;else if(o instanceof t){if(o===this)return e;e._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return e;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function b(t){return t.reduce((function(t,r){return t.concat(r instanceof p?r.errors:r)}),[])}var y=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),d=function(t){function r(e,n,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=a;break;case 1:if(!e){i.destination=a;break}if("object"==typeof e){e instanceof r?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new v(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new v(i,e,n,o)}return i}return o(r,t),r.prototype[y]=function(){return this},r.create=function(t,e,n){var o=new r(t,e,n);return o.syncErrorThrowable=!1,o},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},r}(h),v=function(t){function r(r,e,n,o){var u,c=t.call(this)||this;c._parentSubscriber=r;var s=c;return i(e)?u=e:e&&(u=e.next,n=e.error,o=e.complete,e!==a&&(i((s=Object.create(e)).unsubscribe)&&c.add(s.unsubscribe.bind(s)),s.unsubscribe=c.unsubscribe.bind(c))),c._context=s,c._next=u,c._error=n,c._complete=o,c}return o(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=c.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;s(t)}}},r.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};c.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw t;s(t)}},r.prototype.__tryOrSetError=function(t,r,e){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return c.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1},r.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},r}(d);var g=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function w(t){return t}function m(t){return 0===t.length?w:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var _=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,o=function(t,r,e){if(t){if(t instanceof d)return t;if(t[y])return t[y]()}return t||r||e?new d(t,r,e):new d(a)}(t,r,e);if(n?o.add(n.call(o,this.source)):o.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),c.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){c.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),!function(t){for(;t;){var r=t,e=r.closed,n=r.destination,o=r.isStopped;if(e||o)return!1;t=n&&n instanceof d?n:null}return!0}(t)?console.warn(r):t.error(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=O(r))((function(r,n){var o;o=e.subscribe((function(r){try{t(r)}catch(t){n(t),o&&o.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[g]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:m(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=O(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function O(t){if(t||(t=c.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function E(t,r){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new j(t,r))}}var j=function(){function t(t,r){this.project=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new S(t,this.project,this.thisArg))},t}(),S=function(t){function r(r,e,n){var o=t.call(this,r)||this;return o.project=e,o.count=0,o.thisArg=n||o,o}return o(r,t),r.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(r)},r}(d);function P(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var x=P(),T=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function k(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var A=function(t){if(t&&"function"==typeof t[g])return o=t,function(t){var r=o[g]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)};if(T(t))return n=t,function(t){for(var r=0,e=n.length;r<e&&!t.closed;r++)t.next(n[r]);t.complete()};if(k(t))return e=t,function(t){return e.then((function(r){t.closed||(t.next(r),t.complete())}),(function(r){return t.error(r)})).then(null,s),t};if(t&&"function"==typeof t[x])return r=t,function(t){for(var e=r[x]();;){var n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add((function(){e.return&&e.return()})),t};var r,e,n,o,i=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function R(t,r){if(null!=t){if(function(t){return t&&"function"==typeof t[g]}(t))return function(t,r){return new _((function(e){var n=new h;return n.add(r.schedule((function(){var o=t[g]();n.add(o.subscribe({next:function(t){n.add(r.schedule((function(){return e.next(t)})))},error:function(t){n.add(r.schedule((function(){return e.error(t)})))},complete:function(){n.add(r.schedule((function(){return e.complete()})))}}))}))),n}))}(t,r);if(k(t))return function(t,r){return new _((function(e){var n=new h;return n.add(r.schedule((function(){return t.then((function(t){n.add(r.schedule((function(){e.next(t),n.add(r.schedule((function(){return e.complete()})))})))}),(function(t){n.add(r.schedule((function(){return e.error(t)})))}))}))),n}))}(t,r);if(T(t))return function(t,r){return new _((function(e){var n=new h,o=0;return n.add(r.schedule((function(){o!==t.length?(e.next(t[o++]),e.closed||n.add(this.schedule())):e.complete()}))),n}))}(t,r);if(function(t){return t&&"function"==typeof t[x]}(t)||"string"==typeof t)return function(t,r){if(!t)throw new Error("Iterable cannot be null");return new _((function(e){var n,o=new h;return o.add((function(){n&&"function"==typeof n.return&&n.return()})),o.add(r.schedule((function(){n=t[x](),o.add(r.schedule((function(){if(!e.closed){var t,r;try{var o=n.next();t=o.value,r=o.done}catch(t){return void e.error(t)}r?e.complete():(e.next(t),this.schedule())}})))}))),o}))}(t,r)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function D(t,r){return new _((function(e){var n=t.length;if(0!==n)for(var o=new Array(n),i=0,u=0,c=function(c){var s,a,f=(s=t[c],a?R(s,a):s instanceof _?s:new _(A(s))),l=!1;e.add(f.subscribe({next:function(t){l||(l=!0,u++),o[c]=t},error:function(t){return e.error(t)},complete:function(){++i!==n&&l||(u===n&&e.next(r?r.reduce((function(t,r,e){return t[r]=o[e],t}),{}):o),e.complete())}}))},s=0;s<n;s++)c(s);else e.complete()}))}function M(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var C=function(){function t(){var r,e,n;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),n={},(e="tags")in(r=this)?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n}var r,e,n;return r=t,(e=[{key:"getTag",value:function(t){return this.tags[t]||(this.tags[t]=[]),this.tags[t]}},{key:"addToTags",value:function(t,r){var e=this;t.forEach((function(t){return e.getTag(t).push(r)}))}},{key:"removeFromTags",value:function(t,r){var e=this;t.forEach((function(t){var n=e.getTag(t);e.tags[t]=n.filter((function(t){return t!==r}))}))}}])&&M(r.prototype,e),n&&M(r,n),t}();function I(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function H(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function V(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var U=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,"tagManager",void 0),V(this,"actions",{}),this.tagManager=new C}var r,e,n;return r=t,n=[{key:"getInstance",value:function(r){return t.instances[r]||(t.instances[r]=new t),t.instances[r]}}],(e=[{key:"addAction",value:function(t){var r=this;this.actions[t.id]=t,this.tagManager.addToTags(t.tags,t.id),t.subject.subscribe({complete:function(){return r.removeAction(t.id)}})}},{key:"removeAction",value:function(t){this.tagManager.removeFromTags(this.getAction(t).tags,t),delete this.actions[t]}},{key:"getAction",value:function(t){return this.actions[t]}},{key:"getActionIdsOfTags",value:function(t){var r=this;return Object.keys(t.map((function(t){return r.tagManager.getTag(t)})).reduce((function(t,r){var e=function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?I(Object(e),!0).forEach((function(r){V(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):I(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}({},t);return r.forEach((function(t){return e[t]=!0})),e}),{}))}},{key:"reset",value:function(r){delete t.instances[r]}}])&&H(r.prototype,e),n&&H(r,n),t}();V(U,"instances",{});var N=function t(r,e){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t);var n=U.getInstance(e);r.blockingActionIds=n.getActionIdsOfTags(r.dependencyTags),n.addAction(r);var o=r.blockingActionIds.map((function(t){return n.getAction(t)}));if(o.length)return o.forEach((function(t){return t.subject.subscribe({complete:function(){return r.blockingActionIds=r.blockingActionIds.filter((function(r){return r!==t.id}))}})})),function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(1===t.length){var e=t[0];if(f(e))return D(e,null);if(l(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return D(n.map((function(t){return e[t]})),n)}}if("function"==typeof t[t.length-1]){var o=t.pop();return D(t=1===t.length&&f(t[0])?t[0]:t,null).pipe(E((function(t){return o.apply(void 0,t)})))}return D(t,null)}(o.map((function(t){return t.subject.toPromise()}))).subscribe({complete:function(){r.execute()}});r.execute()},Y=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),L=function(t){function r(r,e){var n=t.call(this)||this;return n.subject=r,n.subscriber=e,n.closed=!1,n}return o(r,t),r.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.closed){var e=r.indexOf(this.subscriber);-1!==e&&r.splice(e,1)}}},r}(h),G=function(t){function r(r){var e=t.call(this,r)||this;return e.destination=r,e}return o(r,t),r}(d),F=function(t){function r(){var r=t.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return o(r,t),r.prototype[y]=function(){return new G(this)},r.prototype.lift=function(t){var r=new Q(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.closed)throw new Y;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].next(t)},r.prototype.error=function(t){if(this.closed)throw new Y;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),o=0;o<e;o++)n[o].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.closed)throw new Y;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(r){if(this.closed)throw new Y;return t.prototype._trySubscribe.call(this,r)},r.prototype._subscribe=function(t){if(this.closed)throw new Y;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new L(this,t))},r.prototype.asObservable=function(){var t=new _;return t.source=this,t},r.create=function(t,r){return new Q(t,r)},r}(_),Q=function(t){function r(r,e){var n=t.call(this)||this;return n.destination=r,n.source=e,n}return o(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):h.EMPTY},r}(F);var z,q=function t(){var r,e,n;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),n=void 0,(e="subject")in(r=this)?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,this.subject=new F};function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function K(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function W(t,r){return(W=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function X(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=tt(t);if(r){var o=tt(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Z(this,e)}}function Z(t,r){return!r||"object"!==B(r)&&"function"!=typeof r?$(t):r}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}!function(t){t.ERROR="error",t.PENDING="pending",t.COMPLETE="complete"}(z||(z={}));var et=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&W(t,r)}(i,t);var r,e,n,o=X(i);function i(){var t;J(this,i);for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return rt($(t=o.call.apply(o,[this].concat(e))),"status",z.COMPLETE),rt($(t),"errors",{}),rt($(t),"actions",0),t}return r=i,(e=[{key:"observeAction",value:function(t){var r=this;return this.actions||(this.status=z.PENDING,this.notifyObservers(z.COMPLETE)),this.actions+=1,t.subject.subscribe({next:function(t){return r.onActionChanged(t)},complete:function(){return r.onActionCompleted(t)}}),!0}},{key:"onActionChanged",value:function(t){var r=t.error,e=t.actionId,n=this.status;if(r)return this.errors[e]=r,this.status=z.ERROR,void this.notifyObservers(n);delete this.errors[e],Object.keys(this.errors).length||(this.status=z.PENDING,this.notifyObservers(n))}},{key:"onActionCompleted",value:function(t){if(this.actions-=1,delete this.errors[t.id],!this.actions){var r=this.status;this.status=z.COMPLETE,this.notifyObservers(r)}}},{key:"notifyObservers",value:function(t){t!==this.status&&this.subject.next({status:this.status})}}])&&K(r.prototype,e),n&&K(r,n),i}(q);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function it(t,r){return(it=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function ut(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=at(t);if(r){var o=at(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return ct(this,e)}}function ct(t,r){return!r||"object"!==nt(r)&&"function"!=typeof r?st(t):r}function st(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var lt=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&it(t,r)}(i,t);var r,e,n,o=ut(i);function i(t){var r;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),ft(st(r=o.call(this)),"statusManager",void 0),ft(st(r),"name",void 0),r.name=t,r.statusManager=new et,r}return r=i,(e=[{key:"addNode",value:function(t){var r=this;t.subject.subscribe({complete:function(){return r.subject.next({nodeDeleted:t.id})}}),this.statusManager.observeAction(t),new N(t,this.name),this.subject.next({nodeAdded:t.id})}}])&&ot(r.prototype,e),n&&ot(r,n),i}(q);function pt(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ht(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var bt=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,"graphs",{})}var r,e,n;return r=t,n=[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}],(e=[{key:"getGraph",value:function(t){return this.graphs[t]||(this.graphs[t]=new lt(t)),this.graphs[t]}}])&&pt(r.prototype,e),n&&pt(r,n),t}();ht(bt,"instance",void 0);var yt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),dt=new Uint8Array(16);function vt(){if(!yt)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yt(dt)}for(var gt=[],wt=0;wt<256;++wt)gt.push((wt+256).toString(16).substr(1));var mt=function(t,r){var e=r||0,n=gt;return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()};var _t=function(t,r,e){"string"==typeof t&&(r="binary"===t?new Uint8Array(16):null,t=null);var n=(t=t||{}).random||(t.rng||vt)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,r){for(var o=e||0,i=0;i<16;++i)r[o+i]=n[i];return r}return mt(n)};function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jt(t,r){return(jt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function St(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=Tt(t);if(r){var o=Tt(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Pt(this,e)}}function Pt(t,r){return!r||"object"!==Ot(r)&&"function"!=typeof r?xt(t):r}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var At=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&jt(t,r)}(i,t);var r,e,n,o=St(i);function i(t,r,e){var n;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),kt(xt(n=o.call(this)),"id",void 0),kt(xt(n),"dependencyTags",void 0),kt(xt(n),"tags",void 0),kt(xt(n),"blockingActionIds",void 0),kt(xt(n),"command",void 0),n.id=_t(),n.dependencyTags=r,n.tags=t,n.blockingActionIds=[],n.command=e,n}return r=i,(e=[{key:"execute",value:function(){var t=this;this.subject.next({actionId:this.id}),this.command().then((function(r){return t.subject.next({result:r})})).catch((function(r){return t.subject.next({actionId:t.id,error:r})})).finally((function(){return t.subject.complete()}))}}])&&Et(r.prototype,e),n&&Et(r,n),i}(q);r.default=bt}});
//# sourceMappingURL=index.js.map